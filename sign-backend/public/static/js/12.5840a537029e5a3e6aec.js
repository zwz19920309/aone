webpackJsonp([12],{"5vVu":function(e,t){},ZAWM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),c=n("exGp"),s=n.n(c),i=n("1h8J"),o={components:{"edit-signon-dialog":function(){return n.e(9).then(n.bind(null,"q0HN"))}},data:function(){var e=this;return{signon:{},signons:[],cDynamic:this.dynamic||{actionbutton:[{label:"编辑",type:"primary",size:"mini",action:function(){var t=s()(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handleEdit(n);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{label:"删除",type:"danger",size:"mini",action:function(){var t=s()(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handleDelete(n);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}],bluckActionbutton:[{label:"批量删除",type:"danger",size:"mini",action:function(){var t=s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handleBluckEdit();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]}}},created:function(){},methods:{func:function(e,t){var n=this;return s()(r.a.mark(function a(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e&&e(t);case 1:case"end":return n.stop()}},a,n)}))()},handleEdit:function(e){var t=this;return s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:console.log("@EditData: ",e),t.signon=e,t.$refs.editSignon.open();case 3:case"end":return n.stop()}},n,t)}))()},handleDelete:function(e){var t=this;return s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:console.log("@row: ",e),t.$confirm("确认删除该选项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(i.h)({id:e.id});case 2:200===n.sent.status&&(t.$message({message:"删除成功",type:"success"}),t.callBack&&t.callBack());case 4:case"end":return n.stop()}},n,t)})));case 2:case"end":return n.stop()}},n,t)}))()},handleSelectionChange:function(e){var t=this;return s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.signons=e;case 1:case"end":return n.stop()}},n,t)}))()},handleBluckEdit:function(){var e=this;return s()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("@handleBluckEdit: ",e.signons),n=[],e.signons.forEach(function(e){n.push(e.id)}),t.next=5,Object(i.f)({ids:n});case 5:200===t.sent.status&&(e.$message({message:"删除成功",type:"success"}),e.callBack&&e.callBack());case 7:case"end":return t.stop()}},t,e)}))()},handleSignOn:function(e){var t=this;return s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("@handleSignOn: ",e),n.next=3,Object(i.s)({number:e.cycleNum,id:t.signon.id,name:e.name,checkinTypeId:e.checkinype,dateTypeId:e.datetype,ruleDesc:e.rule_desc,startAt:e.startAt,endAt:e.endAt});case 3:200===n.sent.status&&(t.$message({message:"修改成功",type:"success"}),t.$refs.editSignon.close(),t.callBack&&t.callBack());case 5:case"end":return n.stop()}},n,t)}))()},toPrizeList:function(e,t){this.$router.push({path:"/prizeList",query:{id:t.id}})}},props:["signonList","isEdit","callBack","dynamic"]},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.signonList,stripe:""},on:{"selection-change":e.handleSelectionChange}},[e.isEdit?n("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"date",label:"签到类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.checktypename))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"签到周期",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.cycle_text.name))]),e._v(" "),5==t.row.cycle_text.type?n("span",[e._v(":"+e._s(t.row.cycle_text.number)+"(天)")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"rule_desc",label:"规则描述",width:"250"}}),e._v(" "),n("el-table-column",{attrs:{label:"奖品管理",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("span",{staticClass:"price_detial",on:{click:function(n){return e.toPrizeList(t.$index,t.row)}}},[e._v("奖品详情")])])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"start_at",label:"开始时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"end_at",label:"结束时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"创建时间"}}),e._v(" "),e.isEdit?n("el-table-column",{attrs:{prop:"desc",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.cDynamic.actionbutton,function(a,r){return n("el-button",{key:r,attrs:{type:a.type,size:a.size},on:{click:function(n){return e.func(a.action,t.row)}}},[e._v("\n          "+e._s(a.label)+"\n        ")])})}}],null,!1,1075550459)}):e._e()],1),e._v(" "),e.isEdit?n("div",{staticClass:"pad10 t-right"},e._l(e.cDynamic.bluckActionbutton,function(t,a){return n("el-button",{key:a,attrs:{type:t.type,size:t.size},on:{click:function(n){return e.func(t.action,e.prizes)}}},[e._v("\n      "+e._s(t.label)+"\n    ")])}),1):e._e(),e._v(" "),n("div",[n("edit-signon-dialog",{ref:"editSignon",attrs:{callBack:e.handleSignOn,signon:e.signon}})],1)],1)},staticRenderFns:[]};var l=n("VU/8")(o,u,!1,function(e){n("5vVu")},null,null);t.default=l.exports}});
//# sourceMappingURL=12.5840a537029e5a3e6aec.js.map