webpackJsonp([4],{"2IxJ":function(e,t){},mtbW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Xxa5"),a=n.n(s),r=n("exGp"),i=n.n(r),c=n("1h8J"),o={data:function(){return{scene:{},handleType:0,sceneList:[],signonList:[]}},components:{"signon-list-dialog":function(){return n.e(15).then(n.bind(null,"4rA6"))}},created:function(){this.initData()},methods:{initData:function(){var e=this;return i()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.m)(e.params);case 2:n=t.sent,console.log("@data: ",n),200===n.status&&n.data.list.length&&(e.sceneList=n.data.list);case 5:case"end":return t.stop()}},t,e)}))()},handleSigonList:function(e,t,n){var s=this;return i()(a.a.mark(function e(){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.scene=t,s.handleType=n,e.next=4,Object(c.p)({sceneId:s.scene.id,type:s.handleType});case 4:if(200!==(r=e.sent).status||!r.data.list.length){e.next=9;break}s.signonList=r.data.list,e.next=11;break;case 9:return 1===s.handleType?s.$message.error("暂无新增签到活动模板"):s.$message.error("该场景尚未配置签到活动模板"),e.abrupt("return");case 11:s.$refs.signonListRef.open();case 12:case"end":return e.stop()}},e,s)}))()},changeScenesign:function(e){var t=this;return i()(a.a.mark(function n(){var s,r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s=[],e.forEach(function(e){s.push([t.scene.id,e.id])}),r=void 0,1!==t.handleType){n.next=9;break}return n.next=6,Object(c.c)({scenesignons:s});case 6:r=n.sent,n.next=12;break;case 9:return n.next=11,Object(c.e)({scenesignons:s});case 11:r=n.sent;case 12:r&&200===r.status?(t.$message({message:"操作成功",type:"success"}),t.$refs.signonListRef.close()):t.$message.error("操作失败");case 13:case"end":return n.stop()}},n,t)}))()}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fillcontain"},[n("div",{staticClass:"table_container"},[n("div",{staticClass:"mar10"},[n("div",{staticClass:"pad10"},[n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.sceneList,stripe:""}},[n("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"note",label:"描述"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"创建时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"desc",label:"签到活动",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.handleSigonList(t.$index,t.row,1)}}},[e._v("添加")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return e.handleSigonList(t.$index,t.row,2)}}},[e._v("删除")])]}}])})],1)],1)]),e._v(" "),n("div",[n("signon-list-dialog",{ref:"signonListRef",attrs:{signonList:e.signonList,callBack:e.changeScenesign}})],1)])])},staticRenderFns:[]};var u=n("VU/8")(o,l,!1,function(e){n("2IxJ")},null,null);t.default=u.exports}});
//# sourceMappingURL=4.1dc0713f56f451d52557.js.map